<!DOCTYPE html>
<head>
  <link rel="stylesheet" href="types-docs.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
  
  <body>
     <div class="container20">
     <header><strong>Flashage de t√©l√©phones</strong></header>
  <form id="formulaire">
    <input type="hidden" id="service" value="Flashage de t√©l√©phone">
    <input type="hidden" id="montant" value="10000 FCFA">

    <label for="nom">Nom(s):</label>
    <input type="text" id="nom" name="nom" required>

    <label for="prenom">Pr√©nom(s):</label>
    <input type="text" id="prenom" name="prenom" required>

    <label for="numero">Num√©ro de t√©l√©phone:</label>
    <input type="tel" id="numero" name="numero" required pattern="[0-9]{8,15}" placeholder="Ex: 062345678">

    <label for="marque">Marque de t√©l√©phone:</label>
    <select name="marque" id="marque" required>
      <option value="">-- Choisir la marque --</option>
      <option value="Samsung">Samsung</option>
      <option value="Tecno">Tecno</option>
      <option value="Itel">Itel</option>
      <option value="Infinix">Infinix</option>
      <option value="Huawei">Huawei</option>
      <option value="Autre">Autre...</option>
    </select>

    <input type="text" id="autreMarque" name="autreMarque" placeholder="Entrez la marque" style="display:none; margin-top:10px;">

    <div class="buttons">
      <button type="button" id="valider">Valider</button>
      <button type="reset">Supprimer</button>
    </div>

    <div id="synthese" style="display:none; margin-top:20px; color:white;">
      <h3>üìã V√©rifiez vos informations</h3>
      <p><strong>Service:</strong> <span id="rService"></span></p>
      <p><strong>Nom:</strong> <span id="rNom"></span></p>
      <p><strong>Pr√©nom:</strong> <span id="rPrenom"></span></p>
      <p><strong>Num√©ro:</strong> <span id="rNumero"></span></p>
      <p><strong>Marque:</strong> <span id="rMarque"></span></p>
      <p><strong>Montant:</strong> <span id="rMontant"></span></p>

      <div class="buttons">
        <button type="button" id="confirmer">Confirmer</button>
        <button type="button" id="modifier">Modifier</button>
      </div>
    </div>
  </form>
</div>
<script>
  function initialiserFormulaire(formulaire) {
    console.log("‚úÖ Formulaire d√©tect√© et initialis√©.");

    const validerBtn = formulaire.querySelector("#valider");
    const synthese = formulaire.querySelector("#synthese");
    const autreMarque = formulaire.querySelector("#autreMarque");
    const marque = formulaire.querySelector("#marque");
    const service = formulaire.querySelector("#service");
    const montant = formulaire.querySelector("#montant");

    const rNom = formulaire.querySelector("#rNom");
    const rPrenom = formulaire.querySelector("#rPrenom");
    const rNumero = formulaire.querySelector("#rNumero");
    const rMarque = formulaire.querySelector("#rMarque");
    const rService = formulaire.querySelector("#rService");
    const rMontant = formulaire.querySelector("#rMontant");
    const modifierBtn = formulaire.querySelector("#modifier");
    const confirmerBtn = formulaire.querySelector("#confirmer");

    // Afficher champ "Autre"
    marque.addEventListener("change", () => {
      autreMarque.style.display = marque.value === "Autre" ? "block" : "none";
      if (marque.value !== "Autre") autreMarque.value = "";
    });

    // Bouton "Valider"
    validerBtn.addEventListener("click", () => {
      const nom = formulaire.querySelector("#nom").value.trim();
      const prenom = formulaire.querySelector("#prenom").value.trim();
      const numero = formulaire.querySelector("#numero").value.trim();
      let marqueChoisie = marque.value === "Autre" ? (autreMarque.value.trim() || "Non pr√©cis√©") : marque.value;

      if (!nom || !prenom || !numero || !marqueChoisie) {
        alert("‚ö†Ô∏è Merci de remplir tous les champs.");
        return;
      }

      rNom.textContent = nom;
      rPrenom.textContent = prenom;
      rNumero.textContent = numero;
      rMarque.textContent = marqueChoisie;
      rService.textContent = service.value;
      rMontant.textContent = montant.value;

      // Cacher uniquement les champs du formulaire, pas les boutons de synth√®se
      formulaire.querySelectorAll("input, select").forEach(el => {
        if (!el.closest("#synthese")) el.style.display = "none";
      });
      validerBtn.style.display = "none";

      synthese.style.display = "block";
    });

    // Bouton "Modifier"
    modifierBtn.addEventListener("click", () => {
      formulaire.querySelectorAll("input, select").forEach(el => el.style.display = "");
      validerBtn.style.display = "";
      synthese.style.display = "none";
      autreMarque.style.display = marque.value === "Autre" ? "block" : "none";
    });

    // Bouton "Confirmer"
    confirmerBtn.addEventListener("click", () => {
      const choix = confirm("Souhaitez-vous envoyer ces informations par WhatsApp ? (OK = WhatsApp / Annuler = Email)");

      const message = `Bonjour, voici mes infos :%0AüíÅ‚Äç‚ôÇÔ∏è Service: ${rService.textContent}%0Aüë§ Nom: ${rNom.textContent}%0Aüßç‚Äç‚ôÇÔ∏è Pr√©nom: ${rPrenom.textContent}%0Aüìû Num√©ro: ${rNumero.textContent}%0Aüíª Mod√®le: ${rMarque.textContent}%0Aüíµ Montant: ${rMontant.textContent}`;

      if (choix) {
        const numeroWhatsApp = "241074849344";
        const lien = `https://wa.me/${numeroWhatsApp}?text=${message}`;
        window.open(lien, "_blank");
      } else {
        const sujet = encodeURIComponent("Nouvelle soumission de formulaire");
        const corps = encodeURIComponent(
          `Nom: ${rNom.textContent}\nPr√©nom: ${rPrenom.textContent}\nNum√©ro: ${rNumero.textContent}\nMod√®le: ${rMarque.textContent}\nService: ${rService.textContent}\nMontant: ${rMontant.textContent}`
        );
        window.location.href = `mailto:ezersidney705@gmail.com?subject=${sujet}&body=${corps}`;
      }

      alert("‚úÖ Donn√©es envoy√©es !");
      formulaire.reset();
      synthese.style.display = "none";
      autreMarque.style.display = "none";

      formulaire.querySelectorAll("input, select").forEach(el => el.style.display = "");
      validerBtn.style.display = "";
    });
  }

  // üî• APPEL OBLIGATOIRE ‚Äî sinon rien ne marche !
  document.addEventListener("DOMContentLoaded", () => {
    const formulaire = document.querySelector("#formulaire");
    initialiserFormulaire(formulaire);
  });
</script>
  </body>
 